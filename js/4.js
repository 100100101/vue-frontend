webpackJsonp([4],{771:function(a,b,d){var h=d(0),j=d(773),k=d(774),p=h(j,k,!1,function(){!1||d(772)},null,null);p.options.__file="source/components/Module/maps-view/components/mapbox/index.vue",p.esModule&&Object.keys(p.esModule).some(function(q){return"default"!==q&&"__"!==q.substr(0,2)})&&console.error("named exports are not supported in *.vue files."),!1,a.exports=p.exports},772:function(){},773:function(a,b,d){"use strict";(function(f,g,h){a.exports={name:function(j){return"index"===j?function(k){return k[k.length-1]}(h.split(f.sep)):j}(f.basename(g,f.extname(g))),data:function(){return{layer:null,locate:"",chapters:{1:{bearing:27,center:[37.617223366512235,55.75806366412715],zoom:15.5,pitch:20},2:{duration:6e3,center:[37.61486390061776,55.78006251500369],bearing:150,zoom:15,pitch:0},"\u0430\u043B\u0435\u044F-\u041C\u0438\u0440\u0430":{bearing:90,center:[37.50564800554068,55.732947887059225],zoom:13,speed:0.6,pitch:40},Лужники:{bearing:90,center:[37.54927934469049,55.72028672036063],zoom:12.3},4:{bearing:45,center:[37.646230183946045,55.674873668831424],zoom:15.3,pitch:20,speed:0.5},5:{bearing:180,center:[37.73461451092629,55.65296003626014],zoom:12.3},6:{bearing:90,center:[37.73461451092629,55.65296003626014],zoom:17.3,pitch:40},7:{bearing:90,center:[38.1272356986581,55.59774166854058],zoom:14.3,pitch:20}},styleRules:{mapWrapper:{height:"100%",width:"100%"},chapterList:{position:"absolute",bottom:20,right:40,display:"flex",flexDirection:"column",zIndex:1},chapter:{background:"rgba(255, 0, 0, 0.2)",cursor:"pointer",padding:3,"&:not(:first-child)":{borderTop:"1px solid #000"}},map:{height:"100%",width:"100%"},marker:{backgroundColor:"#f00",backgroundSize:"cover",width:50,height:50,borderRadius:"50%",cursor:"pointer"}}}},computed:{c:function(){return this.$jss.createObservableStyleSheet(this,"styleRules").classes}},methods:{updateMapOptions:function(){}},mounted:function(){function k(p){return p*(2-p)}var l=this;console.log("mounted mapbox window.mBox = this:",window.mBox=this),mapboxgl.accessToken="pk.eyJ1IjoiYmliaWsiLCJhIjoiY2o3bnRxZXlzM2VwaDMzbnRqdWZ3NGNsMiJ9.3qx6UDTl6m6wWxo2wrmvOw",this.map=new mapboxgl.Map({container:this.$refs.map,style:"mapbox://styles/mapbox/streets-v10",center:[37.621817085082824,55.75152565364448],zoom:15.5,bearing:27,pitch:45,attributionControl:!1}),this.map.addControl(new MapboxLanguage({defaultLanguage:"ru"})),this.map.addControl(new mapboxgl.GeolocateControl({positionOptions:{enableHighAccuracy:!0},trackUserLocation:!0})),this.map.addControl(new mapboxgl.NavigationControl);var m=document.createElement("div");m.className=this.c.marker,console.log("marker",m),new mapboxgl.Marker(m).setLngLat([37.54927934469049,55.72028672036063]).addTo(this.map),this.map.on("load",function(){for(var p=l.map.getStyle().layers.reverse(),q=p.findIndex(function(x){return"symbol"!==x.type}),r=-1===q?void 0:p[q].id,s=16,v=200/s,w=0;w<s;w++)l.map.addLayer({id:"3d-buildings-"+w,source:"composite","source-layer":"building",filter:["all",["==","extrude","true"],[">","height",w*v],["<=","height",(w+1)*v]],type:"fill-extrusion",minzoom:15,paint:{"fill-extrusion-color":"#aaa","fill-extrusion-height":{type:"identity",property:"height"},"fill-extrusion-base":{type:"identity",property:"min_height"},"fill-extrusion-height-transition":{duration:0,delay:0},"fill-extrusion-opacity":.3}},r);l.map.addSource("earthquakes",{type:"geojson",data:{type:"FeatureCollection",crs:{type:"name",properties:{name:"urn:ogc:def:crs:OGC:1.3:CRS84"}},features:[{type:"Feature",properties:{id:"ak16994521",mag:2.3,time:1507425650893,felt:null,tsunami:0},geometry:{type:"Point",coordinates:[37.60472594291491,55.751924675551976]}},{type:"Feature",properties:{id:"ak16994519",mag:1.7,time:1507425289659,felt:null,tsunami:0},geometry:{type:"Point",coordinates:[37.615285590108726,55.76253349758662]}},{type:"Feature",properties:{id:"ak16994517",mag:1.6,time:1507424832518,felt:null,tsunami:0},geometry:{type:"Point",coordinates:[37.62265075450634,55.753015586439005]}},{type:"Feature",properties:{id:"ci38021336",mag:1.42,time:1507423898710,felt:null,tsunami:0},geometry:{type:"Point",coordinates:[37.64273791065901,55.75695564945468]}},{type:"Feature",properties:{id:"us2000b2nn",mag:4.2,time:1507422626990,felt:null,tsunami:0},geometry:{type:"Point",coordinates:[37.63480713214102,55.75129569026652]}},{type:"Feature",properties:{id:"ak16994510",mag:1.6,time:1507422449194,felt:null,tsunami:0},geometry:{type:"Point",coordinates:[37.62890402467795,55.7604477531477]}},{type:"Feature",properties:{id:"us2000b2nb",mag:4.6,time:1507420784440,felt:null,tsunami:0},geometry:{type:"Point",coordinates:[37.649597791965505,55.75279730044562]}},{type:"Feature",properties:{id:"ak16994298",mag:2.4,time:1507419370097,felt:null,tsunami:0},geometry:{type:"Point",coordinates:[37.64074733407679,55.76421761476138]}},{type:"Feature",properties:{id:"nc72905861",mag:1.39,time:1507418785100,felt:null,tsunami:0},geometry:{type:"Point",coordinates:[37.65201320247485,55.75772132897515]}},{type:"Feature",properties:{id:"ci38021304",mag:1.11,time:1507418426010,felt:null,tsunami:0},geometry:{type:"Point",coordinates:[37.634925813897695,55.751245514823864]}},{type:"Feature",properties:{id:"ci38021304",mag:1.11,time:1507418426010,felt:null,tsunami:0},geometry:{type:"Point",coordinates:[37.6227336327712,55.752990027282664]}},{type:"Feature",properties:{id:"ci38021304",mag:1.11,time:1507418426010,felt:null,tsunami:0},geometry:{type:"Point",coordinates:[37.62364297679213,55.752417514898696]}},{type:"Feature",properties:{id:"ci38021304",mag:1.11,time:1507418426010,felt:null,tsunami:0},geometry:{type:"Point",coordinates:[37.622387587175695,55.7523235368142]}},{type:"Feature",properties:{id:"ci38021304",mag:1.11,time:1507418426010,felt:null,tsunami:0},geometry:{type:"Point",coordinates:[37.62246782502771,55.75198721207596]}}]},cluster:!0,clusterMaxZoom:14,clusterRadius:50}),l.map.addLayer({id:"clusters",type:"circle",source:"earthquakes",filter:["has","point_count"],paint:{"circle-color":{property:"point_count",type:"interval",stops:[[0,"#51bbd6"],[100,"#f1f075"],[750,"#f28cb1"]]},"circle-radius":{property:"point_count",type:"interval",stops:[[0,20],[100,30],[750,40]]}}}),l.map.addLayer({id:"cluster-count",type:"symbol",source:"earthquakes",filter:["has","point_count"],layout:{"text-field":"{point_count_abbreviated}","text-font":["DIN Offc Pro Medium","Arial Unicode MS Bold"],"text-size":12}}),l.map.addLayer({id:"unclustered-point",type:"circle",source:"earthquakes",filter:["!has","point_count"],paint:{"circle-color":"#11b4da","circle-radius":4,"circle-stroke-width":1,"circle-stroke-color":"#fff"}})});var n=100,o=25;this.map.getCanvas().focus(),this.map.getCanvas().addEventListener("keydown",function(p){p.preventDefault(),38===p.which?l.map.panBy([0,-n],{easing:k}):40===p.which?l.map.panBy([0,n],{easing:k}):37===p.which?l.map.easeTo({bearing:l.map.getBearing()-o,easing:k}):39===p.which&&l.map.easeTo({bearing:l.map.getBearing()+o,easing:k})},!0),this.map.on("click",function(p){var q=p.lngLat;l.locate=JSON.stringify([q.lng,q.lat])})}}}).call(b,d(1),"source/components/Module/maps-view/components/mapbox/index.vue","source/components/Module/maps-view/components/mapbox")},774:function(a){"use strict";var f=function(){var j=this,k=j.$createElement,l=j._self._c||k;return l("div",{"class":j.c.mapWrapper},[l("span",{staticStyle:{position:"absolute",right:"20px",top:"20px",padding:"10px",background:"#00f","z-index":"1"}},[j._v("\n\t\tLOCATE: "+j._s(j.locate)+"\n\t")]),l("div",{"class":j.c.chapterList},j._l(j.chapters,function(m,n){return l("span",{"class":j.c.chapter,on:{click:function(){j.map.flyTo(j.chapters[n])}}},[j._v("\n\t\t\t"+j._s(n)+"\n\t\t")])})),l("div",{ref:"map","class":j.c.map})])};f._withStripped=!0,a.exports={render:f,staticRenderFns:[]},!1}});